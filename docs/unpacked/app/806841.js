Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.syncdFatalErrorLogger = function (e) {
  const {
    stage: t,
    annotations: n
  } = e;
  if (t !== "FAIL") {
    return;
  }
  const o = (0, r.convertSyncdFatalErrorFromAnnotations)(n);
  if (o == null) {
    return void (0, i.uploadFatalErrorMetric)(a.MD_SYNCD_FATAL_ERROR_CODE.UNKNOWN, null);
  }
  (0, i.uploadFatalErrorMetric)(function (e) {
    switch (e) {
      case r.SyncdFatalErrorType.PATCH_PROTOBUF_SERIALIZATION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.PATCH_PROTOBUF_SERIALIZATION_FAILED;
      case r.SyncdFatalErrorType.MUTATIONS_PROTOBUF_SERIALIZATION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MUTATIONS_PROTOBUF_SERIALIZATION_FAILED;
      case r.SyncdFatalErrorType.ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED;
      case r.SyncdFatalErrorType.ENCRYPTION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.ENCRYPTION_FAILED;
      case r.SyncdFatalErrorType.MISSING_SNAPSHOT_VERSION:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_VERSION;
      case r.SyncdFatalErrorType.MISSING_SNAPSHOT_MAC:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_MAC;
      case r.SyncdFatalErrorType.MISSING_SNAPSHOT_KEY_ID:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_KEY_ID;
      case r.SyncdFatalErrorType.MISSING_PATCH_VERSION:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_VERSION;
      case r.SyncdFatalErrorType.PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS:
        return a.MD_SYNCD_FATAL_ERROR_CODE.PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS;
      case r.SyncdFatalErrorType.MISSING_PATCH_SNAPSHOT_MAC:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_SNAPSHOT_MAC;
      case r.SyncdFatalErrorType.MISSING_PATCH_MAC:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_MAC;
      case r.SyncdFatalErrorType.MISSING_PATCH_KEY_ID:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_KEY_ID;
      case r.SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY;
      case r.SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH;
      case r.SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256;
      case r.SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256;
      case r.SyncdFatalErrorType.MISSING_MUTATION_OPERATION:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_OPERATION;
      case r.SyncdFatalErrorType.MISSING_MUTATION_RECORD:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_RECORD;
      case r.SyncdFatalErrorType.MISSING_MUTATION_INDEX:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_INDEX;
      case r.SyncdFatalErrorType.MISSING_MUTATION_VALUE:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_VALUE;
      case r.SyncdFatalErrorType.MISSING_MUTATION_KEY_ID:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_KEY_ID;
      case r.SyncdFatalErrorType.EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED;
      case r.SyncdFatalErrorType.SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED;
      case r.SyncdFatalErrorType.PATCH_PROTOBUF_DESERIALIZATION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.PATCH_PROTOBUF_DESERIALIZATION_FAILED;
      case r.SyncdFatalErrorType.MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED;
      case r.SyncdFatalErrorType.ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED;
      case r.SyncdFatalErrorType.MISSING_ACTION_INDEX:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_INDEX;
      case r.SyncdFatalErrorType.MISSING_ACTION_VERSION:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_VERSION;
      case r.SyncdFatalErrorType.SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT:
        return a.MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT;
      case r.SyncdFatalErrorType.SNAPSHOT_MAC_MISMATCH_IN_PATCH:
        return a.MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_MAC_MISMATCH_IN_PATCH;
      case r.SyncdFatalErrorType.MAC_MISMATCH_PATCH:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MAC_MISMATCH_PATCH;
      case r.SyncdFatalErrorType.DECRYPTION_FAILED:
        return a.MD_SYNCD_FATAL_ERROR_CODE.DECRYPTION_FAILED;
      case r.SyncdFatalErrorType.DUPLICATE_PATCH_VERSION_IN_COLLECTION:
        return a.MD_SYNCD_FATAL_ERROR_CODE.DUPLICATE_PATCH_VERSION_IN_COLLECTION;
      case r.SyncdFatalErrorType.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH:
        return a.MD_SYNCD_FATAL_ERROR_CODE.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH;
      case r.SyncdFatalErrorType.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT:
        return a.MD_SYNCD_FATAL_ERROR_CODE.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT;
      case r.SyncdFatalErrorType.MISSING_ACTION_VALUE:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_VALUE;
      case r.SyncdFatalErrorType.MISSING_ACTION_TIMESTAMP:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_TIMESTAMP;
      case r.SyncdFatalErrorType.XMPP_BAD_REQUEST_FOR_COLLECTION:
        return a.MD_SYNCD_FATAL_ERROR_CODE.XMPP_BAD_REQUEST_FOR_COLLECTION;
      case r.SyncdFatalErrorType.XMPP_NOT_FOUND_FOR_COLLECTION:
        return a.MD_SYNCD_FATAL_ERROR_CODE.XMPP_NOT_FOUND_FOR_COLLECTION;
      case r.SyncdFatalErrorType.CYCLIC_MUTATION_DEPENDENCY_IN_PATCH:
        return a.MD_SYNCD_FATAL_ERROR_CODE.CYCLIC_MUTATION_DEPENDENCY_IN_PATCH;
      case r.SyncdFatalErrorType.SERVER_DID_NOT_SEND_ALL_PATCHES:
        return a.MD_SYNCD_FATAL_ERROR_CODE.SERVER_DID_NOT_SEND_ALL_PATCHES;
      case r.SyncdFatalErrorType.TERMINAL_PATCH_MISSING_DATA:
        return a.MD_SYNCD_FATAL_ERROR_CODE.TERMINAL_PATCH_MISSING_DATA;
      case r.SyncdFatalErrorType.TERMINAL_PATCH_DESERIALIZATION_ERROR:
        return a.MD_SYNCD_FATAL_ERROR_CODE.TERMINAL_PATCH_DESERIALIZATION_ERROR;
      case r.SyncdFatalErrorType.TERMINAL_PATCH_UNKNOWN:
        return a.MD_SYNCD_FATAL_ERROR_CODE.TERMINAL_PATCH_UNKNOWN;
      case r.SyncdFatalErrorType.INVALID_ACTION_INDEX:
        return a.MD_SYNCD_FATAL_ERROR_CODE.INVALID_ACTION_INDEX;
      case r.SyncdFatalErrorType.XMPP_BAD_REQUEST_GLOBAL_ERROR:
        return a.MD_SYNCD_FATAL_ERROR_CODE.XMPP_BAD_REQUEST_GLOBAL_ERROR;
      case r.SyncdFatalErrorType.XMPP_NOT_FOUND_GLOBAL_ERROR:
        return a.MD_SYNCD_FATAL_ERROR_CODE.XMPP_NOT_FOUND_GLOBAL_ERROR;
      case r.SyncdFatalErrorType.XMPP_BAD_METHOD_GLOBAL_ERROR:
        return a.MD_SYNCD_FATAL_ERROR_CODE.XMPP_BAD_METHOD_GLOBAL_ERROR;
      case r.SyncdFatalErrorType.XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR:
        return a.MD_SYNCD_FATAL_ERROR_CODE.XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR;
      case r.SyncdFatalErrorType.TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D:
        return a.MD_SYNCD_FATAL_ERROR_CODE.TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D;
      case r.SyncdFatalErrorType.TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY:
        return a.MD_SYNCD_FATAL_ERROR_CODE.TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY;
      case r.SyncdFatalErrorType.MISSING_KEY_ON_ALL_CLIENTS:
        return a.MD_SYNCD_FATAL_ERROR_CODE.MISSING_KEY_ON_ALL_CLIENTS;
    }
  }(o.type), o.collection == null ? null : o.collection, o.patchSnapshotMutationCount == null ? undefined : o.patchSnapshotMutationCount, o.patchVersion == null ? undefined : o.patchVersion, o.isFatal == null ? undefined : o.isFatal, o.isLtHashConsistent == null ? undefined : o.isLtHashConsistent);
};
var r = require("./787685.js");
var i = require("./22383.js");
var a = require("./845972.js");